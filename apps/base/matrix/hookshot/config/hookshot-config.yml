# Hookshot Configuration
# Documentation: https://matrix-org.github.io/matrix-hookshot/setup/

# Bridge connection settings
bridge:
  domain: borooka.ee
  url: http://synapse.app-matrix.svc:8008
  mediaUrl: https://matrix.borooka.ee
  port: 9993
  bindAddress: 0.0.0.0

# Passkey for encryption (must match the generated key)
passFile: /data/passkey.pem

# Logging configuration
logging:
  level: info
  colorize: true
  json: false
  timestampFormat: HH:mm:ss:SSS

# Listeners configuration
listeners:
  # Webhooks and widgets listener
  - port: 9000
    bindAddress: 0.0.0.0
    resources:
      - webhooks
      - widgets
  # Metrics listener for Prometheus scraping
  - port: 9001
    bindAddress: 0.0.0.0
    resources:
      - metrics

# Generic webhook configuration
generic:
  enabled: true
  outbound: false
  urlPrefix: https://hookshot.borooka.ee/webhook
  userIdPrefix: _webhooks_
  allowJsTransformationFunctions: false
  waitForComplete: false

# Widget configuration
widgets:
  addToAdminRooms: true
  publicUrl: https://hookshot.borooka.ee/widgets
  branding:
    widgetTitle: Hookshot Configuration

# Permissions - who can configure the bridge
permissions:
  - actor: borooka.ee
    services:
      - service: "*"
        level: admin

# Metrics for prometheus (optional)
metrics:
  enabled: true

# Bot configuration
bot:
  displayname: Hookshot Bot
  avatar: mxc://half-shot.uk/2876e89ccade4cb615e210c458e2a7a6883571c4

# Redis cache for encryption support
cache:
  redisUri: redis://hookshot-redis.app-matrix.svc:6379

# End-to-end encryption support for encrypted Matrix rooms
encryption:
  storagePath: /data/cryptostore
