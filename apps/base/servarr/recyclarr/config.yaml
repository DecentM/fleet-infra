apiVersion: v1
kind: ConfigMap
metadata:
  name: recyclarr-config
  namespace: app-servarr
data:
  settings.yml: |
    # yaml-language-server: $schema=https://raw.githubusercontent.com/recyclarr/recyclarr/master/schemas/settings-schema.json

    enable_ssl_certificate_validation: true
    git_path: /usr/bin/git

  recyclarr.yml: |
    # yaml-language-server: $schema=https://raw.githubusercontent.com/recyclarr/recyclarr/master/schemas/config-schema.json
    # https://recyclarr.dev/wiki/yaml/config-reference/

    # Configuration specific to Sonarr
    sonarr:
      series:
        base_url: http://sonarr.app-servarr.svc:8989
        api_key: !env_var SERVARR_API_KEY

        delete_old_custom_formats: true

        include:
          # Comment out any of the following includes to disable them
          - template: sonarr-quality-definition-anime
          - template: sonarr-v4-quality-profile-anime
          - template: sonarr-v4-custom-formats-anime
          - template: sonarr-quality-definition-series
          - template: sonarr-v4-quality-profile-web-1080p
          - template: sonarr-v4-custom-formats-web-1080p
          - template: sonarr-v4-quality-profile-web-2160p
          - template: sonarr-v4-custom-formats-web-2160p

        # Custom Formats: https://recyclarr.dev/wiki/yaml/config-reference/custom-formats/
        custom_formats:
          - trash_ids:
              - 026d5aadd1a6b4e550b134cb6c72b3ca # Uncensored
            assign_scores_to:
              - name: Remux-1080p - Anime
                score: 0 # Adjust scoring as desired

          - trash_ids:
              - b2550eb333d27b75833e25b8c2557b38 # 10bit
            assign_scores_to:
              - name: Remux-1080p - Anime
                score: 1 # Adjust scoring as desired

          - trash_ids:
              - 418f50b10f1907201b6cfdf881f467b7 # Anime Dual Audio
            assign_scores_to:
              - name: Remux-1080p - Anime
                score: 2 # Adjust scoring as desired

          # HDR Formats
          - trash_ids:
              # Comment out the next line if you and all of your users' setups are fully DV compatible
              - 9b27ab6498ec0f31a3353992e19434ca # DV (WEBDL)
            assign_scores_to:
              - name: WEB-2160p

          # Optional SDR
          # SDR (no WEBDL) - block UHD/4k Remux and Bluray encode SDR releases, but allow SDR WEB
          - trash_ids:
              - 83304f261cf516bb208c18c54c0adf97 # SDR (no WEBDL)
            assign_scores_to:
              - name: WEB-2160p

    # Configuration specific to Radarr.
    radarr:
      movies:
        base_url: http://radarr.app-servarr.svc:7878
        api_key: !env_var SERVARR_API_KEY

        quality_definition:
          type: movie

        delete_old_custom_formats: true

        include:
          - template: radarr-quality-definition-movie
          - template: radarr-quality-profile-remux-web-2160p
          - template: radarr-custom-formats-remux-web-2160p
          - template: radarr-quality-definition-movie
          - template: radarr-quality-profile-anime
          - template: radarr-custom-formats-anime
